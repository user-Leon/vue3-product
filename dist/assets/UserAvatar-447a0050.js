import{_ as U}from"./el-message-c6515230.js";import{u as k,r as u,o,c as p,b as a,d as s,x as E,f as r,e as x,g as i,bP as A,E as w,A as b,aV as d,bQ as B}from"./index-59425964.js";import{_ as S,E as R}from"./_plugin-vue_export-helper-a51b2f09.js";import{E as V}from"./el-progress-17039b49.js";import"./_baseClone-6f62348b.js";import"./isEqual-6182e13d.js";const C=["src"],N={__name:"UserAvatar",setup(z){const l=k(),t=u(l.user.user_pic),n=u(),f=_=>{const e=new FileReader;e.readAsDataURL(_.raw),e.onload=()=>{t.value=e.result}},m=async()=>{await A(t.value),await l.getUser(),w.success("头像更新成功")};return(_,e)=>{const v=b,g=V,c=R,y=U;return o(),p(y,{title:"更换头像"},{default:a(()=>[s(g,{ref_key:"uploadRef",ref:n,"auto-upload":!1,class:"avatar-uploader","show-file-list":!1,"on-change":f},{default:a(()=>[t.value?(o(),E("img",{key:0,src:t.value,class:"avatar"},null,8,C)):(o(),p(v,{key:1,class:"avatar-uploader-icon"},{default:a(()=>[s(r(d))]),_:1}))]),_:1},512),e[3]||(e[3]=x("br",null,null,-1)),s(c,{onClick:e[0]||(e[0]=F=>n.value.$el.querySelector("input").click()),type:"primary",icon:r(d),size:"large"},{default:a(()=>e[1]||(e[1]=[i("选择图片",-1)])),_:1,__:[1]},8,["icon"]),s(c,{onClick:m,type:"success",icon:r(B),size:"large"},{default:a(()=>e[2]||(e[2]=[i("上传头像",-1)])),_:1,__:[2]},8,["icon"])]),_:1,__:[3]})}}},P=S(N,[["__scopeId","data-v-55292731"]]);export{P as default};
